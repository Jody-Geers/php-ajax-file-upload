{"filter":false,"title":"index.html","tooltip":"/index.html","undoManager":{"mark":0,"position":0,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":73,"column":0},"end":{"row":73,"column":7}},"text":"</html>"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":73,"column":0}},"nl":"\r\n","lines":["<!DOCTYPE html>","<html lang=\"en\">","<head>","\t<meta charset=\"UTF-8\" />","\t<title>Upload and Parse CSV</title>","\t","\t<link rel=\"stylesheet\" type=\"text/css\" media=\"all\" href=\"styles.css\" />","</head>","<body>","\t","\t<div id=\"app\">","\t","\t\t<form id=\"upload\" action=\"/modules/file-upload/\" method=\"POST\" enctype=\"multipart/form-data\">","\t\t","\t\t\t<fieldset>","\t\t\t<legend>CSV File Upload</legend>","\t\t\t\t","\t\t\t\t<div id=\"upload-file-selector\">","\t\t\t\t\t<button type=\"button\" onclick=\"selectFile();\">Select Files</button>","\t\t\t\t</div>","\t\t\t\t","\t\t\t\t<div class=\"display-none\">","\t\t\t\t\t<input id=\"select-file\" type=\"file\" name=\"file\" onchange=\"fileSelected( this );\" />","\t\t\t\t</div>","\t\t\t\t","\t\t\t\t<div class=\"display-none\" id=\"upload-submit\">","\t\t\t\t\t<button type=\"submit\">Upload Files</button>","\t\t\t\t</div>\t\t\t\t","\t\t\t\t","\t\t\t</fieldset>","\t\t","\t\t</form>","\t","\t</div>","","</body>","<script>","","/**"," * Helper to get el"," */","function $( id ) {","\t","\treturn document.getElementById( id );","\t","}","","/**"," * Choose file to select"," */","function selectFile() {","","\t$( 'select-file' ).click();","\t","}","","/**"," * File selection made"," * @param {el} - ctx element"," */","function fileSelected( el ) {","","\tvar file = el.value;","\tvar fileName = file.split( '\\\\' );","\t","\t$( 'upload-file-selector' ).innerHTML += fileName[fileName.length-1];","\t","\tvar reg = new RegExp( '(\\\\s|^)' + 'display-none' + '(\\\\s|$)' );","\t\t$( 'upload-submit' ).className = $( 'upload-submit' ).className.replace( reg, '' );","\t","}","","</script>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":15}},"text":"<!DOCTYPE html>"},{"action":"insertText","range":{"start":{"row":0,"column":15},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":144,"column":0}},"lines":["<html lang=\"en\">","<head>","\t<meta charset=\"UTF-8\" />","\t<title>Upload and Parse CSV</title>","\t","\t<link rel=\"stylesheet\" type=\"text/css\" media=\"all\" href=\"styles.css\" />","</head>","<body>","\t","\t<div id=\"app\">","\t","\t\t<form id=\"upload\" action=\"/modules/file-upload/\" method=\"POST\" enctype=\"multipart/form-data\">","\t\t","\t\t\t<fieldset>","\t\t\t<legend>CSV File Upload</legend>","\t\t\t\t","\t\t\t\t<div id=\"upload-file-selector\">","\t\t\t\t\t<button type=\"button\" onclick=\"selectFile();\">Select Files</button>","\t\t\t\t</div>","\t\t\t\t","\t\t\t\t<div class=\"display-none\">","\t\t\t\t\t<input id=\"upload-select-file\" type=\"file\" name=\"file\" onchange=\"fileSelected( this );\" />","\t\t\t\t</div>","\t\t\t\t","\t\t\t\t<div class=\"display-none\" id=\"upload-submit\">","\t\t\t\t\t<button type=\"submit\" id=\"upload-submit-button\">Upload Files</button>","\t\t\t\t</div>","\t\t\t\t","\t\t\t</fieldset>","\t\t","\t\t</form>","\t","\t\t<div id=\"output\">","\t\t</div>","\t","\t</div>","","</body>","<script>","","// els","var uploadForm = $( 'upload' ),","\tuploadFileSelector = $( 'upload-file-selector' ),","\tuploadSelectFile = $( 'upload-select-file' ),","\tuploadSubmit = $( 'upload-submit' ),","\tuploadSubmitBtn = $( 'upload-submit-button' ),","\tuploadUploading = $( 'upload-loading' ),","\tregExpDisplayNone = new RegExp( '(\\\\s|^)' + 'display-none' + '(\\\\s|$)' )",";","","/**"," * Helper to get el"," */","function $( id ) {","\t","\treturn document.getElementById( id );","\t","}","","/**"," * Choose file to select"," */","function selectFile() {","","\tuploadSelectFile.click();","\t","}","","/**"," * File selection made"," * @param {el} - ctx element"," */","function fileSelected( el ) {","","\t// show selected file","\tvar file = el.value;","\tvar fileName = file.split( '\\\\' );","\t","\tuploadFileSelector.innerHTML += fileName[fileName.length-1];","\t","\t// show submit btn ","\tuploadSubmit.className = uploadSubmit.className.replace( regExpDisplayNone, '' );","\t","}","","/**","* Overide form default submit behaviour","* @param {event} - form submit action\t","*/","uploadForm.onsubmit = function( event ) {","\t","\tevent.preventDefault();","\t","\t// Get the selected files from the input.","\tvar files = uploadSelectFile.files;","\t","\t// Create a new FormData object.","\tvar formData = new FormData();","\t","\t// Loop through each of the selected files. ","\t// TODO: server does not currently accept multiple files.","\tfor ( var i = 0; i < files.length; i++ ) {","\t\t","\t\tvar file = files[i];","","\t\t// Check the file type.","\t\tif ( !file.type.match( 'image.*' ) ) {","\t\t\tcontinue;","\t\t}","","\t\t// Add the file to the request.","\t\tformData.append( 'file', file, file.name );","\t\t","\t}","\t","\t// Set up the request.","\tvar xhr = new XMLHttpRequest();","\t","\t// Open the connection.","\txhr.open( uploadForm.method, uploadForm.action, true );","\t","\t// Set up a handler for when the request finishes.","\txhr.onload = function () {","\t\t","\t\tupdateUiProcessEnd( xhr.response );","\t\t","\t};","\t","\t// Send the Data.","\txhr.send( formData );","}","","/**","* Updates UI, Removed submit button, shows ajax\t","* @param {string} - xhr.response","*/","function updateUiProcessEnd( res ) {","\t","\t$('output').innerHTML = res;","\t","}","","</script>"]},{"action":"insertText","range":{"start":{"row":144,"column":0},"end":{"row":144,"column":7}},"text":"</html>"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":144,"column":7},"end":{"row":144,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":88,"state":"js-doc-start","mode":"ace/mode/html"}},"timestamp":1408096306911,"hash":"294cc311c34869922554a7efc19bf0f799b0a235"}